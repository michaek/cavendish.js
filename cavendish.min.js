// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=jQuery,t=function(){function t(e,t){this.show=e,this.options=t,this.slides=this.show.find(this.options.slideSelector),this.slides.length>0&&this.initialize()}return t.prototype.initialize=function(){var t=this;return this.last=e(),this.length=this.slides.length,this.show.data("cavendish",this).addClass("cavendish-slideshow"),this.slides.each(function(n,r){return t.show.trigger("cavendish-slide-init",[n,e(r),t])}),this.goto(0),this.slides.not(this.current).addClass("cavendish-before")},t.prototype.next=function(){var e;return e=this.index+1,e>=this.length&&(e=0),this.goto(e)},t.prototype.prev=function(){var e;return e=this.index-1,e<0&&(e=this.slides.length-1),this.goto(e)},t.prototype.goto=function(t){var n=this;if(this.slides[t]==null)return;return this.index=t,this.current!=null&&(this.last=this.current),this.current=this.slides.eq(this.index),this.slides.removeClass("cavendish-onstage cavendish-before cavendish-after cavendish-left cavendish-right"),this.last.addClass("cavendish-after"),this.current.addClass("cavendish-onstage"),this.slides.each(function(t,r){if(t<n.index)return e(r).addClass("cavendish-left");if(t>n.index)return e(r).addClass("cavendish-right")}),this.slides.not(this.last).not(this.current).addClass("cavendish-before"),this.show.trigger("cavendish-transition",[this])},t}(),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){var e=this;t.__super__.initialize.apply(this,arguments),this.options.player_pause&&this.show.hover(function(){return e.stop()},function(){return e.start()});if(this.options.player_start)return this.start()},t.prototype.start=function(){var e=this;return this.show.addClass("cavendish-playing"),this.timeout=setInterval(function(){return e.next()},this.options.slideTimeout)},t.prototype.stop=function(){return this.show.removeClass("cavendish-playing"),clearInterval(this.timeout)},t}(t),e.fn.cavendish=function(i){var s;if(typeof i!="string")return i=e.extend({},r,i),this.each(function(){return i.player?new n(e(this),i):new t(e(this),i)});s=e(this).data("cavendish");if(s!=null)switch(i){case"next":s.next();break;case"prev":s.prev();break;case"cavendish":return s}return this},r=e.fn.cavendish.defaults={player:!0,player_start:!0,player_pause:!0,slideSelector:"> ol > li",slideTimeout:2e3}}).call(this);